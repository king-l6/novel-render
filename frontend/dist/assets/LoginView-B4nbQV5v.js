import{d as w,u as y,c as b,a as i,b as t,w as r,e as s,F as x,f as h,A as k,g as _,r as c,h as m,I as B,i as F,B as V,j as I,k as N,l as S,m as q,o as d,n as z}from"./index-OB4_tYqa.js";const C={class:"min-h-screen flex items-center justify-center p-4 bg-gray-50"},U={class:"w-full max-w-sm"},E=w({__name:"LoginView",setup(j){const p=S(),f=q(),g=y(),a=N({username:"",password:""}),n=c(!1),o=c("");async function v(){n.value=!0,o.value="";try{await g.login(a.username,a.password),z.success("ç™»å½•æˆåŠŸ");const l=f.query.redirect||"/bookshelf";p.replace(l)}catch(l){const e=l instanceof Error?l.message:"ç™»å½•å¤±è´¥";o.value=e==="Failed to fetch"||e.includes("fetch")?"æ— æ³•è¿žæŽ¥æœåŠ¡å™¨ï¼Œè¯·ç¡®è®¤å·²ç”¨ http://local.bilibili.co:3000 æ‰“å¼€å¹¶å·²å¯åŠ¨æœåŠ¡":e}finally{n.value=!1}}return(l,e)=>(d(),b("div",C,[i("div",U,[e[3]||(e[3]=i("h1",{class:"text-2xl font-bold text-center text-gray-800 mb-2"},"ðŸ“– èµµèˆ’ä»°â¤ï¸ä¸“å±žå°è¯´é˜…è¯»å™¨",-1)),e[4]||(e[4]=i("p",{class:"text-center text-gray-500 mb-6"},"è¯·å…ˆç™»å½•",-1)),t(s(x),{model:a,layout:"vertical",onFinish:v},{default:r(()=>[t(s(m),{name:"username",label:"ç”¨æˆ·å",rules:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å"}]},{default:r(()=>[t(s(B),{value:a.username,"onUpdate:value":e[0]||(e[0]=u=>a.username=u),placeholder:"ç”¨æˆ·å",size:"large","allow-clear":""},null,8,["value"])]),_:1}),t(s(m),{name:"password",label:"å¯†ç ",rules:[{required:!0,message:"è¯·è¾“å…¥å¯†ç "}]},{default:r(()=>[t(s(F),{value:a.password,"onUpdate:value":e[1]||(e[1]=u=>a.password=u),placeholder:"å¯†ç ",size:"large","allow-clear":""},null,8,["value"])]),_:1}),t(s(m),null,{default:r(()=>[t(s(V),{type:"primary","html-type":"submit",size:"large",block:"",loading:n.value,class:"mt-2"},{default:r(()=>[...e[2]||(e[2]=[I(" ç™»å½• ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),o.value?(d(),h(s(k),{key:0,type:"error",message:o.value,"show-icon":"",class:"mt-4"},null,8,["message"])):_("",!0)])]))}});export{E as default};
