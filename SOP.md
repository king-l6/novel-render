# TXT 小说阅读器 - 操作说明（SOP）

## 一、管理员账号

| 项目     | 内容        |
|----------|-------------|
| **用户名** | `admin`     |
| **密码**   | `admin123`  |

> 首次启动服务时会自动创建该管理员账号。仅管理员可访问「管理」页面，管理用户与书籍。

---

## 二、启动服务

1. 进入项目目录：
   ```bash
   cd /path/to/novel-reader
   ```
2. 安装依赖（首次或依赖变更后）：
   ```bash
   pnpm install
   # 或：npm install
   ```
3. （可选）使用 Vue 前端时需先构建：
   ```bash
   pnpm run build
   ```
4. 启动服务：
   ```bash
   node server/index.js
   ```
5. 浏览器访问（任选其一）：
   - **http://localhost:3000**
   - **http://local.bilibili.co:3000**（公司常用）
   - **http://127.0.0.1:3000**

   若 3000 端口被占用，可指定其他端口：
   ```bash
   PORT=3001 node server/index.js
   ```
   访问 **http://local.bilibili.co:3001**（或 localhost:3001）

---

## 三、日常使用流程

1. **登录**：打开首页，使用个人账号或管理员账号登录。
2. **上传书籍**：将 TXT 文件拖入或点击选择，上传后自动加入当前账号书架。
3. **阅读**：在书架点击书名，从上次进度继续阅读；底部可切换「普通模式」/「分页模式」。
4. **退出**：点击右上角「退出」退出登录。

---

## 四、管理员操作

1. 使用**管理员账号**登录后，首页会出现「**管理**」链接。
2. 点击进入管理页面（`admin.html`），可：
   - **用户**：添加用户、编辑（改密码/是否管理员）、删除用户。
   - **书籍**：点击某用户的「书籍」查看其书架，对任意书籍执行删除。
3. 非管理员访问管理页面会提示「仅管理员可访问」。

---

## 五、数据与备份

- 数据库文件位置：`server/data/novel-reader.db`
- 定期备份：复制该文件即可备份全部用户与书籍数据。

---

## 六、常见问题

| 问题               | 处理方式 |
|--------------------|----------|
| 端口 3000 被占用   | 执行 `lsof -ti :3000 \| xargs kill -9` 或使用 `PORT=3001 node server/index.js` |
| 忘记管理员密码     | 删除 `server/data/novel-reader.db` 后重启服务，将重新生成默认管理员（admin / admin123） |
| 书架/登录失败       | 确认服务已启动且浏览器访问地址与启动时一致（含端口） |
